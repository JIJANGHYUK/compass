try:
    import streamlit as st
except ModuleNotFoundError:
    raise ModuleNotFoundError("ì´ ì½”ë“œëŠ” streamlit íŒ¨í‚¤ì§€ê°€ í•„ìš”í•©ë‹ˆë‹¤. 'pip install streamlit'ìœ¼ë¡œ ì„¤ì¹˜í•˜ì„¸ìš”.")

# ê±´ë¬¼ ì •ë³´ ì…ë ¥
st.sidebar.markdown("**ì¸µìˆ˜ ì •ë³´**")
floors_above = st.sidebar.number_input("ì§€ìƒ ì¸µìˆ˜", min_value=0)
floors_below = st.sidebar.number_input("ì§€í•˜ ì¸µìˆ˜", min_value=0)
st.sidebar.title("ê±´ë¬¼ ì •ë³´ ì…ë ¥")
building_type = st.sidebar.selectbox("ê±´ë¬¼ ìš©ë„", [
    "ê³µë™ì£¼íƒ", "ë¬¸í™” ë° ì§‘íšŒì‹œì„¤", "ìš´ë™ì‹œì„¤", "ì—…ë¬´ì‹œì„¤", "ê·¼ë¦°ìƒí™œì‹œì„¤",
    "íŒë§¤ì‹œì„¤", "ì˜ë£Œì‹œì„¤", "ìˆ™ë°•ì‹œì„¤", "ìœ„ë½ì‹œì„¤", "êµìœ¡ì—°êµ¬ì‹œì„¤",
    "ë…¸ìœ ìì‹œì„¤", "ìˆ˜ë ¨ì‹œì„¤", "ìš´ìˆ˜ì‹œì„¤", "ì°½ê³ ì‹œì„¤", "ê³µì¥",
    "ìœ„í—˜ë¬¼ ì €ì¥ ë° ì²˜ë¦¬ì‹œì„¤", "ìë™ì°¨ ê´€ë ¨ì‹œì„¤", "ë™ë¬¼ ë° ì‹ë¬¼ ê´€ë ¨ì‹œì„¤", "ë¶„ë‡¨ ë° ì“°ë ˆê¸°ì²˜ë¦¬ì‹œì„¤",
    "êµì • ë° êµ°ì‚¬ì‹œì„¤", "ë°©ì†¡í†µì‹ ì‹œì„¤", "ë°œì „ì‹œì„¤", "ë¬˜ì§€ ê´€ë ¨ì‹œì„¤", "ê´€ê´‘íœ´ê²Œì‹œì„¤",
    "ì¥ë¡€ì‹œì„¤", "ì¢…êµì‹œì„¤", "ê¸°íƒ€ì‹œì„¤", "ë³µí•©ê±´ì¶•ë¬¼", "ê±´ì„¤í˜„ì¥", "ì§€í•˜ë„ìƒê°€"
])
area = st.sidebar.number_input("ì—°ë©´ì  (ã¡)", min_value=0)
floors = st.sidebar.number_input("ì¸µìˆ˜", min_value=1)
has_basement = st.sidebar.checkbox("ì§€í•˜ ìˆìŒ")
has_it_room = st.sidebar.checkbox("ì „ì‚°ì‹¤/í†µì‹ ì‹¤ ìˆìŒ")
has_gas = st.sidebar.checkbox("ê°€ìŠ¤ì„¤ë¹„ ìˆìŒ")
approval_date = st.sidebar.date_input("ì‚¬ìš©ìŠ¹ì¸ì¼")

# ì¶”ê°€ ì…ë ¥ í•­ëª©
has_windowless_floor = st.sidebar.checkbox("ë¬´ì°½ì¸µ ìˆìŒ")
has_floor_over_600 = st.sidebar.checkbox("600ã¡ ì´ìƒì¸ ì¸µ ìˆìŒ")
tunnel_length = st.sidebar.number_input("í„°ë„ ê¸¸ì´ (m)", min_value=0)
is_designated_tunnel = st.sidebar.checkbox("ì§€ì •ëœ í„°ë„ ì—¬ë¶€")
sub_type = st.sidebar.text_input("ì„¸ë¶€ ìš©ë„ (ì˜ˆ: ê³ ì‹œì›, ì‚°í›„ì¡°ë¦¬ì› ë“±)")
basement_area = st.sidebar.number_input("ì§€í•˜ì¸µ ì—°ë©´ì  (ã¡)", min_value=0)
layered_use = st.sidebar.checkbox("ìš©ë„ë³„ ì¸µ ë¶„ë¦¬ í•„ìš”")
has_auto_suppression_alt = st.sidebar.checkbox("ìë™ì†Œí™”ì„¤ë¹„ë¡œ ëŒ€ì²´ ì—¬ë¶€")
occupancy = st.sidebar.number_input("ìˆ˜ìš© ì¸ì› (ëª…)", min_value=0)

# ê²°ê³¼ í‘œì‹œ
st.title("ì†Œë°©ì‹œì„¤ ì„¤ì¹˜ ê¸°ì¤€ ìë™ ì¡°íšŒ")
st.write("ì…ë ¥í•œ ê±´ë¬¼ ì •ë³´ì— ë”°ë¼ í•„ìš”í•œ ì†Œë°©ì‹œì„¤ ë‚´ì—­ì„ í™•ì¸í•´ë³´ì„¸ìš”.")
st.markdown("<p style='font-size:13px;'>â€» ë²•ë ¹ ì¶œì²˜: <a href='https://www.law.go.kr/lbook/lbInfoR.do?lbookSeq=100443' target='_blank'>ì†Œë°©ì‹œì„¤ë²•ë ¹ì§‘ êµ­ê°€ë²•ë ¹ì •ë³´ì„¼í„°</a></p>", unsafe_allow_html=True)

# ì„¤ë¹„ë³„ ì¡°ê±´ ë¡œì§ ì‹œì‘
from collections import defaultdict
from datetime import date

def get_fire_facilities(building_type, area, floors,
                        has_basement, has_it_room, has_gas, approval_date, sub_type, basement_area, layered_use, has_auto_suppression_alt, occupancy, has_windowless_floor, has_floor_over_600, tunnel_length, is_designated_tunnel):
    categorized = defaultdict(list)

    def add(category, name, required, desc, law_text):
        categorized[category].append({
            "name": name,
            "required": required,
            "desc": desc,
            "law_text": law_text
        })

    # ì¡°ê²¬í‘œ ê¸°ì¤€ ì ìš© ì˜ˆì‹œ (1ì°¨: ì†Œí™”ì„¤ë¹„ ì¼ë¶€)

    # âœ… ì†Œí™”ê¸°êµ¬
    add("ì†Œí™”ì„¤ë¹„", "ì†Œí™”ê¸°êµ¬", area >= 33, "ì—°ë©´ì  33ã¡ ì´ìƒ ëª¨ë“  ê±´ì¶•ë¬¼ì€ ì†Œí™”ê¸°êµ¬ë¥¼ ì„¤ì¹˜í•´ì•¼ í•©ë‹ˆë‹¤.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")

    # âœ… ì˜¥ë‚´ì†Œí™”ì „ì„¤ë¹„
    add("ì†Œí™”ì„¤ë¹„", "ì˜¥ë‚´ì†Œí™”ì „ì„¤ë¹„", (
        (sub_type in ["ì˜¥ìƒì°¨ê³ ", "ì§€í•˜ì£¼ì°¨ì¥"] and area >= 200)
        or (sub_type == "í„°ë„" and tunnel_length >= 1000)
        or is_designated_tunnel
        or (area >= 3000 and sub_type != "í„°ë„")
        or ((has_basement or has_windowless_floor or floors >= 4) and has_floor_over_600)
    ), "ì˜¥ìƒì°¨ê³ Â·ì§€í•˜ì£¼ì°¨ì¥ 200ã¡ ì´ìƒ, ì§€í•˜ê°€Â·í„°ë„ 1000ã¡ ì´ìƒ, ì—°ë©´ì  3000ã¡ ì´ìƒ, ë¬´ì°½ì¸µÂ·4ì¸µ ì´ìƒ ì¤‘ ë°”ë‹¥ 600ã¡ ì´ìƒ ì¸µ í¬í•¨ ì‹œ ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")

    # âœ… ì˜¥ì™¸ì†Œí™”ì „ì„¤ë¹„
    add("ì†Œí™”ì„¤ë¹„", "ì˜¥ì™¸ì†Œí™”ì „ì„¤ë¹„", (
        (sub_type == "ëª©ì¡°ê±´ì¶•ë¬¼" and approval_date.year < 2000) or
        (floors <= 2 and area >= 9000)
    ), "ë³´ë¬¼Â·êµ­ë³´ê¸‰ ëª©ì¡°ê±´ì¶•ë¬¼ ë˜ëŠ” ì§€ìƒ 1~2ì¸µ ë°”ë‹¥ë©´ì  í•©ê³„ê°€ 9000ã¡ ì´ìƒì¸ ê²½ìš° ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")

    # âœ… ìŠ¤í”„ë§í´ëŸ¬ì„¤ë¹„
    add("ì†Œí™”ì„¤ë¹„", "ìŠ¤í”„ë§í´ëŸ¬ì„¤ë¹„", (
        not has_auto_suppression_alt and (
            (floors >= 6)
            or (building_type in ["ìˆ˜ë ¨ì‹œì„¤", "êµìœ¡ì—°êµ¬ì‹œì„¤"] and sub_type == "ê¸°ìˆ™ì‚¬" and area >= 5000)
            or (building_type == "ë¬¸í™” ë° ì§‘íšŒì‹œì„¤" and occupancy >= 100)
            or (building_type == "ì˜í™”ìƒì˜ê´€" and ((has_basement or has_windowless_floor) and area >= 500 or area >= 1000))
            or (sub_type == "ë¬´ëŒ€ë¶€" and ((has_basement or has_windowless_floor or floors >= 4) and area >= 300 or area >= 500))
            or (building_type in ["íŒë§¤ì‹œì„¤", "ìš´ìˆ˜ì‹œì„¤", "ì°½ê³ ì‹œì„¤"] and (area >= 5000 or occupancy >= 500))
            or (building_type in ["ê·¼ë¦°ìƒí™œì‹œì„¤", "ì˜ë£Œì‹œì„¤", "ë…¸ìœ ìì‹œì„¤", "ìˆ˜ë ¨ì‹œì„¤", "ìˆ™ë°•ì‹œì„¤"] and area >= 600)
            or (building_type == "êµìœ¡ì—°êµ¬ì‹œì„¤" and area >= 5000)
            or (building_type == "ìš´ë™ì‹œì„¤" and occupancy >= 100)
            or (building_type in ["ì—…ë¬´ì‹œì„¤", "ìœ„ë½ì‹œì„¤"] and area >= 600)
            or (sub_type == "ë™ì‹ì°½ê³ " and st.sidebar.number_input("ë™ì‹ì°½ê³  ì¸µ ë†’ì´ (m)", min_value=0) > 10 and area >= 1500)
            or (building_type in ["ê³µì¥", "ì°½ê³ ì‹œì„¤"] and st.sidebar.checkbox("íŠ¹ìˆ˜ê°€ì—°ë¬¼ 1000ë°° ì´ìƒ ì €ì¥ ì—¬ë¶€"))
            or (building_type in ["ê³µì¥", "ì°½ê³ ì‹œì„¤"] and not st.sidebar.checkbox("ë¶ˆì—°ì¬ë£Œ ì™¸ë²½ ì—¬ë¶€") and area >= 2500)
            or (sub_type in ["ë³´í˜¸ê°í˜¸ì†Œ", "êµë„ì†Œ", "ìœ ì¹˜ì¥"])
            or (building_type == "ì§€í•˜ë„ìƒê°€" and area >= 1000)
            or (building_type == "ë°œì „ì‹œì„¤" and sub_type == "ì „ê¸°ì €ì¥ì‹œì„¤")
        )
    ), "ìŠ¤í”„ë§í´ëŸ¬ì„¤ë¹„ëŠ” ì¸µìˆ˜, ì—°ë©´ì , ìš©ë„ ë° íŠ¹ìˆ˜ì¡°ê±´ì— ë”°ë¼ ë‹¤ì–‘í•œ ê¸°ì¤€ì— ì˜í•´ ì„¤ì¹˜ê°€ ìš”êµ¬ë©ë‹ˆë‹¤.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")

    # âœ… ìë™í™”ì¬íƒì§€ì„¤ë¹„

    # âœ… ë¹„ìƒë°©ì†¡ì„¤ë¹„
    add("ê²½ë³´ì„¤ë¹„", "ë¹„ìƒë°©ì†¡ì„¤ë¹„", (
        (
            area >= 3500
            or (floors_below >= 3)
            or (floors_above >= 11)
        )
        and building_type not in [
            "ìœ„í—˜ë¬¼ ì €ì¥ ë° ì²˜ë¦¬ì‹œì„¤",
            "ë™ë¬¼ ë° ì‹ë¬¼ ê´€ë ¨ì‹œì„¤",
            "ì§€í•˜êµ¬",
            "ì§€í•˜ë„ìƒê°€"
        ]
        and sub_type != "í„°ë„"
    ), "ì—°ë©´ì  3,500ã¡ ì´ìƒ, ì§€í•˜ 3ì¸µ ì´ìƒ, ì§€ìƒ 11ì¸µ ì´ìƒì¸ ê±´ì¶•ë¬¼ë¡œ íŠ¹ì • ì œì™¸ ëŒ€ìƒì´ ì•„ë‹Œ ê²½ìš° ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    add("ê²½ë³´ì„¤ë¹„", "ë¹„ìƒë°©ì†¡ì„¤ë¹„", (
        (
            area >= 3500
            or (has_basement and floors >= 3)
            or (floors >= 11)
        )
        and building_type not in [
            "ìœ„í—˜ë¬¼ ì €ì¥ ë° ì²˜ë¦¬ì‹œì„¤",
            "ë™ë¬¼ ë° ì‹ë¬¼ ê´€ë ¨ì‹œì„¤",
            "ì§€í•˜êµ¬",
            "ì§€í•˜ë„ìƒê°€"
        ]
        and sub_type != "í„°ë„"
    ), "ì—°ë©´ì  3,500ã¡ ì´ìƒ, ì§€í•˜ 3ì¸µ ì´ìƒ, 11ì¸µ ì´ìƒì¸ ê±´ì¶•ë¬¼ë¡œ íŠ¹ì • ì œì™¸ ëŒ€ìƒì´ ì•„ë‹Œ ê²½ìš° ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")

    # âœ… ë¹„ìƒê²½ë³´ì„¤ë¹„

    # âœ… ëˆ„ì „ê²½ë³´ê¸°

    # âœ… ìë™í™”ì¬ì†ë³´ì„¤ë¹„

    # âœ… ë‹¨ë…ê²½ë³´í˜•ê°ì§€ê¸°

    # âœ… ì‹œê°ê²½ë³´ê¸°

    # âœ… ê°€ìŠ¤ëˆ„ì„¤ê²½ë³´ê¸°
    add("ê²½ë³´ì„¤ë¹„", "ê°€ìŠ¤ëˆ„ì„¤ê²½ë³´ê¸°", (
        building_type in [
            "ë¬¸í™” ë° ì§‘íšŒì‹œì„¤", "ì¢…êµì‹œì„¤", "íŒë§¤ì‹œì„¤", "ìš´ìˆ˜ì‹œì„¤",
            "ì˜ë£Œì‹œì„¤", "ë…¸ìœ ìì‹œì„¤", "ìˆ˜ë ¨ì‹œì„¤", "ìš´ë™ì‹œì„¤",
            "ìˆ™ë°•ì‹œì„¤", "ì¥ë¡€ì‹œì„¤"
        ]
        or (building_type == "ì°½ê³ ì‹œì„¤" and sub_type == "ë¬¼ë¥˜í„°ë¯¸ë„")
    ), "ê°€ìŠ¤ë¥¼ ì‚¬ìš©í•˜ëŠ” ì‹œì„¤ ì¤‘ íŠ¹ì • ìš©ë„ì— í•´ë‹¹í•˜ë©´ ê°€ìŠ¤ëˆ„ì„¤ê²½ë³´ê¸° ì„¤ì¹˜ í•„ìš”.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    add("ê²½ë³´ì„¤ë¹„", "ì‹œê°ê²½ë³´ê¸°", (
        building_type in [
            "ê·¼ë¦°ìƒí™œì‹œì„¤", "ë¬¸í™” ë° ì§‘íšŒì‹œì„¤", "ì¢…êµì‹œì„¤", "íŒë§¤ì‹œì„¤",
            "ìš´ìˆ˜ì‹œì„¤", "ì˜ë£Œì‹œì„¤", "ë…¸ìœ ìì‹œì„¤", "ìš´ë™ì‹œì„¤",
            "ì—…ë¬´ì‹œì„¤", "ìˆ™ë°•ì‹œì„¤", "ìœ„ë½ì‹œì„¤", "ë°œì „ì‹œì„¤",
            "ì¥ë¡€ì‹œì„¤"
        ]
        or (building_type == "êµìœ¡ì—°êµ¬ì‹œì„¤" and sub_type == "ë„ì„œê´€")
        or (building_type == "ë°©ì†¡í†µì‹ ì‹œì„¤" and sub_type == "ë°©ì†¡êµ­")
        or (building_type == "ì°½ê³ ì‹œì„¤" and sub_type == "ë¬¼ë¥˜í„°ë¯¸ë„")
        or (building_type == "ì§€í•˜ë„ìƒê°€")
    ), "ì²­ê°ì¥ì• ì¸ì„ ìœ„í•œ ê²½ë³´ì‹œì„¤ë¡œì„œ íŠ¹ì • ìš©ë„ì— ì„¤ì¹˜ í•„ìš”.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    add("ê²½ë³´ì„¤ë¹„", "ë‹¨ë…ê²½ë³´í˜•ê°ì§€ê¸°", (
        (building_type == "ê³µë™ì£¼íƒ" and sub_type in ["ì—°ë¦½ì£¼íƒ", "ë‹¤ì„¸ëŒ€ì£¼íƒ"])
        or (building_type in ["êµìœ¡ì—°êµ¬ì‹œì„¤", "ìˆ˜ë ¨ì‹œì„¤"] and sub_type in ["ê¸°ìˆ™ì‚¬", "í•©ìˆ™ì†Œ"] and area < 2000)
        or (building_type == "ìœ ì¹˜ì›" and area < 400)
        or (building_type == "ë…¸ìœ ìì‹œì„¤" and area >= 400)
        or (building_type == "ìˆ˜ë ¨ì‹œì„¤" and st.sidebar.checkbox("ìˆ™ë°•ê¸°ëŠ¥ ìˆìŒ") and area >= 400 and occupancy < 100)
    ), "ê³µë™ì£¼íƒ(ì—°ë¦½Â·ë‹¤ì„¸ëŒ€), ìœ ì¹˜ì›Â·ê¸°ìˆ™ì‚¬Â·í•©ìˆ™ì†Œ ë“± 2000ã¡ ë¯¸ë§Œ, 400ã¡ ì´ìƒ ë…¸ìœ ìÂ·ìˆ˜ë ¨ì‹œì„¤ ì¤‘ ì¼ë¶€ ì¡°ê±´ì— í•´ë‹¹ ì‹œ ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    add("ê²½ë³´ì„¤ë¹„", "ìë™í™”ì¬ì†ë³´ì„¤ë¹„", (
        sub_type in ["ì¡°ì‚°ì›", "ì‚°í›„ì¡°ë¦¬ì›"]
        or (building_type == "íŒë§¤ì‹œì„¤" and sub_type == "ì „í†µì‹œì¥")
        or (building_type == "ê·¼ë¦°ìƒí™œì‹œì„¤" and sub_type in ["ì˜ì›", "ì¹˜ê³¼ì˜ì›", "í•œì˜ì›"] and st.sidebar.checkbox("ì…ì›ì‹¤ ìˆìŒ"))
        or (building_type == "ì˜ë£Œì‹œì„¤" and sub_type in ["ì¢…í•©ë³‘ì›", "ë³‘ì›", "ì¹˜ê³¼ë³‘ì›", "í•œë°©ë³‘ì›", "ìš”ì–‘ë³‘ì›"])
        or (building_type == "ì˜ë£Œì‹œì„¤" and sub_type in ["ì •ì‹ ë³‘ì›", "ì˜ë£Œì¬í™œì‹œì„¤"] and has_floor_over_600)
        or (building_type == "ë…¸ìœ ìì‹œì„¤")
        or (building_type in ["ë…¸ìœ ìì‹œì„¤", "ìˆ˜ë ¨ì‹œì„¤"] and has_floor_over_600 and st.sidebar.checkbox("ìˆ™ë°•ê¸°ëŠ¥ ìˆìŒ"))
        or (building_type == "ì§€í•˜êµ¬")
        or (sub_type == "ëª©ì¡°ê±´ì¶•ë¬¼" and approval_date.year < 2000)
    ), "ì¡°ì‚°ì›, ì‚°í›„ì¡°ë¦¬ì›, ì „í†µì‹œì¥, ì…ì›ì‹¤ ìˆëŠ” ì˜ì› ë“±, ì •ì‹ ë³‘ë™Â·ë…¸ìœ ìì‹œì„¤ ë“± íŠ¹ì • ì¡°ê±´ ì‹œ ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    contract_current = st.sidebar.number_input("ê³„ì•½ ì „ë¥˜ìš©ëŸ‰ (A)", min_value=0)
    add("ê²½ë³´ì„¤ë¹„", "ëˆ„ì „ê²½ë³´ê¸°", (
        contract_current > 100
        and building_type not in ["ìœ„í—˜ë¬¼ ì €ì¥ ë° ì²˜ë¦¬ì‹œì„¤", "ë™ë¬¼ ë° ì‹ë¬¼ ê´€ë ¨ì‹œì„¤", "ì§€í•˜êµ¬"]
        and sub_type != "í„°ë„"
    ), "ê³„ì•½ì „ë¥˜ìš©ëŸ‰ì´ 100Aë¥¼ ì´ˆê³¼í•˜ê³ , íŠ¹ì • ì œì™¸ì‹œì„¤ì´ ì•„ë‹Œ ê²½ìš° ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    add("ê²½ë³´ì„¤ë¹„", "ë¹„ìƒê²½ë³´ì„¤ë¹„", (
        (occupancy >= 50 and sub_type == "ì˜¥ë‚´ì‘ì—…ì¥")
        or ((has_basement or has_windowless_floor) and area >= (100 if sub_type == "ê³µì—°ì¥" else 150))
        or (area >= 400 and building_type not in ["ê³µì¥", "ì°½ê³ ì‹œì„¤", "ìœ„í—˜ë¬¼ ì €ì¥ ë° ì²˜ë¦¬ì‹œì„¤", "ë™ë¬¼ ë° ì‹ë¬¼ ê´€ë ¨ì‹œì„¤", "ì§€í•˜êµ¬"])
        or (sub_type == "í„°ë„" and tunnel_length >= 500)
    ), "50ëª… ì´ìƒ ê·¼ë¡œìì˜ ì˜¥ë‚´ì‘ì—…ì¥, ì§€í•˜/ë¬´ì°½ì¸µ 150ã¡ ì´ìƒ(ê³µì—°ì¥ì€ 100ã¡), ì—°ë©´ì  400ã¡ ì´ìƒ(ì¼ë¶€ ì‹œì„¤ ì œì™¸), í„°ë„ 500m ì´ìƒ ë“± ì¡°ê±´ì— í•´ë‹¹ ì‹œ ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    add("ê²½ë³´ì„¤ë¹„", "ìë™í™”ì¬íƒì§€ì„¤ë¹„", (
        (building_type == "ê³µë™ì£¼íƒ" and sub_type in ["ì•„íŒŒíŠ¸", "ê¸°ìˆ™ì‚¬"])
        or (building_type == "ê·¼ë¦°ìƒí™œì‹œì„¤" and (area >= 600 or sub_type == "ëª©ìš•ì¥" and area >= 1000 or sub_type in ["ì¡°ì‚°ì›", "ì‚°í›„ì¡°ë¦¬ì›"]))
        or (building_type in ["ë¬¸í™” ë° ì§‘íšŒì‹œì„¤", "ì¢…êµì‹œì„¤", "íŒë§¤ì‹œì„¤", "ìš´ìˆ˜ì‹œì„¤"] and area >= 1000)
        or (floors >= 6 and building_type in ["ë¬¸í™” ë° ì§‘íšŒì‹œì„¤", "ì¢…êµì‹œì„¤", "íŒë§¤ì‹œì„¤", "ìš´ìˆ˜ì‹œì„¤"])
        or (building_type == "íŒë§¤ì‹œì„¤" and sub_type == "ì „í†µì‹œì¥")
        or (building_type == "ì˜ë£Œì‹œì„¤" and (area >= 600 or (sub_type == "ì •ì‹ ì˜ë£Œê¸°ê´€" and (area >= 300 or st.sidebar.checkbox("ì •ì‹ ë³‘ë™ ì°½ì‚´ ìˆìŒ")))))
        or (building_type == "êµìœ¡ì—°êµ¬ì‹œì„¤" and area >= 2000)
        or (building_type == "ë…¸ìœ ìì‹œì„¤" and area >= 400)
        or (building_type == "ìˆ˜ë ¨ì‹œì„¤" and (area >= 2000 or occupancy >= 100))
        or (building_type in ["ìš´ë™ì‹œì„¤", "ì—…ë¬´ì‹œì„¤"] and area >= 1000)
        or (building_type == "ìˆ™ë°•ì‹œì„¤")
        or (building_type == "ìœ„ë½ì‹œì„¤" and area >= 600)
        or (building_type in ["ê³µì¥", "ì°½ê³ ì‹œì„¤", "ìœ„í—˜ë¬¼ ì €ì¥ ë° ì²˜ë¦¬ì‹œì„¤", "ìë™ì°¨ ê´€ë ¨ì‹œì„¤"] and area >= 1000)
        or (building_type in ["ë™ë¬¼ ë° ì‹ë¬¼ ê´€ë ¨ì‹œì„¤", "ë¶„ë‡¨ ë° ì“°ë ˆê¸°ì²˜ë¦¬ì‹œì„¤", "êµì • ë° êµ°ì‚¬ì‹œì„¤"] and area >= 2000)
        or (building_type in ["ë°©ì†¡í†µì‹ ì‹œì„¤", "ë°œì „ì‹œì„¤"] and area >= 1000)
        or (building_type == "ë¬˜ì§€ ê´€ë ¨ì‹œì„¤" and area >= 2000)
        or (building_type == "ê´€ê´‘íœ´ê²Œì‹œì„¤" and area >= 1000)
        or (building_type == "ì¥ë¡€ì‹œì„¤" and area >= 600)
        or (building_type == "ì§€í•˜ë„ìƒê°€" and area >= 1000)
        or (sub_type == "í„°ë„" and tunnel_length >= 1000)
        or (building_type == "ë³µí•©ê±´ì¶•ë¬¼" and area >= 600)
    ), "ì¡°ê²¬í‘œ ê¸°ì¤€ì— ë”°ë¼ ê±´ì¶•ë¬¼ ìš©ë„, ì¸µìˆ˜, ì—°ë©´ì  ë“±ì— ë”°ë¼ ìë™í™”ì¬íƒì§€ì„¤ë¹„ ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")

    # âœ… ë¬¼ë¶„ë¬´ë“±ì†Œí™”ì„¤ë¹„

    # âœ… ì œì—°ì„¤ë¹„

    # âœ… ì—°ê²°ì†¡ìˆ˜ê´€ì„¤ë¹„

    # âœ… ë¹„ìƒì½˜ì„¼íŠ¸ì„¤ë¹„

    # âœ… ë¬´ì„ í†µì‹ ë³´ì¡°ì„¤ë¹„

    # âœ… ì—°ì†Œë°©ì§€ì„¤ë¹„
    add("ì†Œí™”í™œë™ì„¤ë¹„", "ì—°ì†Œë°©ì§€ì„¤ë¹„", (
        (building_type == "ì§€í•˜êµ¬" and sub_type in ["ì „ë ¥ì‹œì„¤", "í†µì‹ ì‹œì„¤"])
        or (floors >= 50 and area >= 0 and st.sidebar.number_input("ê±´ë¬¼ ë†’ì´ (m)", min_value=0) >= 200)
        or (floors >= 11 and occupancy >= 5000 and st.sidebar.checkbox("ì§€í•˜ì—­ì‚¬ ë˜ëŠ” ì§€í•˜ìƒê°€ì™€ ì—°ê²°ë¨"))
    ), "ì§€í•˜êµ¬(ì „ë ¥Â·í†µì‹ ìš©), 50ì¸µ ì´ìƒ + 200m ì´ìƒ ê±´ë¬¼, 11ì¸µ ì´ìƒ + 1ì¼ ìˆ˜ìš©ì¸ì› 5000ëª… ì´ìƒ + ì§€í•˜ì—°ê²° ì‹œ ì—°ì†Œë°©ì§€ì„¤ë¹„ ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    add("ì†Œí™”í™œë™ì„¤ë¹„", "ë¬´ì„ í†µì‹ ë³´ì¡°ì„¤ë¹„", (
        (
            (floors_above >= 30)
            or (sub_type == "í„°ë„" and tunnel_length >= 500)
            or (building_type == "ì§€í•˜ë„ìƒê°€" and area >= 1000)
            or (floors_below >= 3 and basement_area >= 1000)
            or (basement_area >= 3000)
        )
        or (building_type == "ì§€í•˜êµ¬" and sub_type == "ê³µë™êµ¬")
    ), "30ì¸µ ì´ìƒ, í„°ë„ 500m ì´ìƒ, ì§€í•˜ìƒê°€ 1000ã¡ ì´ìƒ, ì§€í•˜ì¸µ 3ê°œ ì´ìƒ + 1000ã¡ ì´ìƒ, ì§€í•˜ì¸µ 3000ã¡ ì´ìƒ ë˜ëŠ” ê³µë™êµ¬ì¼ ê²½ìš° ë¬´ì„ í†µì‹ ë³´ì¡°ì„¤ë¹„ ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    add("ì†Œí™”í™œë™ì„¤ë¹„", "ë¹„ìƒì½˜ì„¼íŠ¸ì„¤ë¹„", (
        (
            (floors_above >= 11)
            or (sub_type == "í„°ë„" and tunnel_length >= 500)
            or (has_basement and floors >= 3 and basement_area >= 1000)
        )
        and building_type != "ìœ„í—˜ë¬¼ ì €ì¥ ë° ì²˜ë¦¬ì‹œì„¤"
        and sub_type != "ê°€ìŠ¤ì‹œì„¤"
        and building_type != "ì§€í•˜êµ¬"
    ), "11ì¸µ ì´ìƒ, í„°ë„ 500m ì´ìƒ, ì§€í•˜ 3ê°œì¸µ ì´ìƒ + ì§€í•˜ì¸µ í•©ê³„ 1000ã¡ ì´ìƒì´ë©´ í•´ë‹¹ ì¸µì— ì„¤ì¹˜. ì¼ë¶€ ì‹œì„¤ ì œì™¸.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    add("ì†Œí™”í™œë™ì„¤ë¹„", "ì—°ê²°ì†¡ìˆ˜ê´€ì„¤ë¹„", (
        (
            (floors_above >= 5 and area >= 6000)
            or (floors_above + floors_below >= 7)
            or (has_basement and floors >= 3 and basement_area >= 1000)
            or (sub_type == "í„°ë„" and tunnel_length >= 1000)
        )
        and building_type != "ìœ„í—˜ë¬¼ ì €ì¥ ë° ì²˜ë¦¬ì‹œì„¤"
        and sub_type != "ê°€ìŠ¤ì‹œì„¤"
        and building_type != "ì§€í•˜êµ¬"
    ), "5ì¸µ ì´ìƒ + ì—°ë©´ì  6000ã¡ ì´ìƒ, ì§€í•˜ í¬í•¨ 7ê°œì¸µ ì´ìƒ, ì§€í•˜ 3ì¸µ ì´ìƒ + ì§€í•˜ë©´ì  1000ã¡ ì´ìƒ, í„°ë„ 1000m ì´ìƒì¼ ê²½ìš° ì„¤ì¹˜. ì¼ë¶€ ì‹œì„¤ ì œì™¸.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")

    # âœ… ì—°ê²°ì‚´ìˆ˜ì„¤ë¹„
    gas_tank_volume = st.sidebar.number_input("ë…¸ì¶œëœ ê°€ìŠ¤íƒ±í¬ ìš©ëŸ‰ (í†¤)", min_value=0)
    add("ì†Œí™”í™œë™ì„¤ë¹„", "ì—°ê²°ì‚´ìˆ˜ì„¤ë¹„", (
        (has_basement and area >= 150)
        or (building_type == "ê³µë™ì£¼íƒ" and sub_type == "êµ­ë¯¼ì£¼íƒê·œëª¨ì´í•˜ì•„íŒŒíŠ¸" and has_basement)
        or (building_type == "êµìœ¡ì—°êµ¬ì‹œì„¤" and has_basement and area >= 700)
        or (building_type in ["íŒë§¤ì‹œì„¤", "ìš´ìˆ˜ì‹œì„¤"] and area >= 1000)
        or (building_type == "ì°½ê³ ì‹œì„¤" and sub_type == "ë¬¼ë¥˜í„°ë¯¸ë„" and area >= 1000)
        or (gas_tank_volume >= 30)
    ), "ì§€í•˜ì¸µ 150ã¡ ì´ìƒ, êµ­ë¯¼ì£¼íƒê·œëª¨ ì•„íŒŒíŠ¸ ì§€í•˜, í•™êµ ì§€í•˜ 700ã¡ ì´ìƒ, ëŒ€í˜• íŒë§¤Â·ìš´ìˆ˜Â·ë¬¼ë¥˜ì‹œì„¤, ê°€ìŠ¤íƒ±í¬ 30í†¤ ì´ìƒì´ë©´ ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    add("ì†Œí™”í™œë™ì„¤ë¹„", "ì œì—°ì„¤ë¹„", (
        (sub_type == "í–‰ì •ì•ˆì „ë¶€ë ¹í„°ë„")
        or (building_type in ["ë¬¸í™” ë° ì§‘íšŒì‹œì„¤", "ì¢…êµì‹œì„¤", "ìš´ë™ì‹œì„¤"] and area >= 200)
        or (building_type == "ì˜í™”ìƒì˜ê´€" and occupancy >= 100)
        or (building_type == "ì§€í•˜ë„ìƒê°€" and area >= 1000)
        or (has_basement and floors >= 5 and area >= 3000)
        or (sub_type in ["íŠ¹ë³„í”¼ë‚œê³„ë‹¨", "ë¹„ìƒìš©ìŠ¹ê°•ê¸°ìŠ¹ê°•ì¥", "í”¼ë‚œìš©ìŠ¹ê°•ê¸°ìŠ¹ê°•ì¥"] and building_type != "ê³µë™ì£¼íƒ")
        or ((has_basement or has_windowless_floor) and area >= 1000 and building_type in [
            "ê·¼ë¦°ìƒí™œì‹œì„¤", "íŒë§¤ì‹œì„¤", "ìš´ìˆ˜ì‹œì„¤", "ìˆ™ë°•ì‹œì„¤", "ìœ„ë½ì‹œì„¤",
            "ì˜ë£Œì‹œì„¤", "ë…¸ìœ ìì‹œì„¤", "ì°½ê³ ì‹œì„¤"
        ] and sub_type == "ë¬¼ë¥˜í„°ë¯¸ë„")
        or (building_type == "ìš´ìˆ˜ì‹œì„¤" and sub_type in ["ì‹œì™¸ë²„ìŠ¤ì •ë¥˜ì¥", "ì² ë„ì‹œì„¤", "ë„ì‹œì² ë„ì‹œì„¤", "ê³µí•­ì‹œì„¤", "í•­ë§Œì‹œì„¤"] and (has_basement or has_windowless_floor) and area >= 1000)
    ), "í„°ë„, ëŒ€ê³µê°„ ë¬¸í™”ì‹œì„¤, 100ëª… ì´ìƒ ì˜í™”ê´€, ëŒ€í˜• ì§€í•˜ê³µê°„, í”¼ë‚œ ìŠ¹ê°•ì¥, ì§€í•˜ì¸µÂ·ë¬´ì°½ì¸µì— ìˆëŠ” íŠ¹ì • ìš©ë„ ì‹œì„¤ì— ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")

    # âœ… ì†Œí™”ìš©ìˆ˜ì„¤ë¹„
    add("ì†Œí™”ìš©ìˆ˜ì„¤ë¹„", "ì†Œí™”ìš©ìˆ˜ì„¤ë¹„", (
        (area >= 5000 and building_type not in ["ìœ„í—˜ë¬¼ ì €ì¥ ë° ì²˜ë¦¬ì‹œì„¤", "ë™ë¬¼ ë° ì‹ë¬¼ ê´€ë ¨ì‹œì„¤", "ì§€í•˜êµ¬"] and sub_type != "í„°ë„")
        or (building_type == "ìœ„í—˜ë¬¼ ì €ì¥ ë° ì²˜ë¦¬ì‹œì„¤" and has_gas and st.sidebar.number_input("ë…¸ì¶œëœ ê°€ìŠ¤íƒ±í¬ ì €ì¥ìš©ëŸ‰ í•©ê³„ (í†¤)", min_value=0) >= 100)
        or (building_type == "ë¶„ë‡¨ ë° ì“°ë ˆê¸°ì²˜ë¦¬ì‹œì„¤" and sub_type in ["íê¸°ë¬¼ ì¬í™œìš© ì‹œì„¤", "íê¸°ë¬¼ ì²˜ë¶„ì‹œì„¤"])
    ), "ì—°ë©´ì  5000ã¡ ì´ìƒ(ì¼ë¶€ ì œì™¸), ë…¸ì¶œíƒ±í¬ ê°€ìŠ¤ì‹œì„¤ 100í†¤ ì´ìƒ, íê¸°ë¬¼ ì¬í™œìš©Â·ì²˜ë¶„ì‹œì„¤ ë“±ì€ ì†Œí™”ìš©ìˆ˜ì„¤ë¹„ ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    add("ì†Œí™”ì„¤ë¹„", "ë¬¼ë¶„ë¬´ë“±ì†Œí™”ì„¤ë¹„", (
        (sub_type == "í•­ê³µê¸°ê²©ë‚©ê³ ")
        or (sub_type == "ê¸°ê³„ì‹ì£¼ì°¨ì‹œì„¤" and occupancy >= 20)
        or (sub_type in ["ì°¨ê³ ", "ì£¼ì°¨ì¥"] and area >= 200)
        or (sub_type in ["ì „ê¸°ì‹¤", "ë°œì „ì‹¤", "ë³€ì „ì‹¤", "ì¶•ì „ì§€ì‹¤", "í†µì‹ ê¸°ê¸°ì‹¤", "ì „ì‚°ì‹¤"] and area >= 300)
        or (sub_type in ["ì°¨ê³ ì£¼ì°¨ìš©ê±´ì¶•ë¬¼", "ì£¼ì°¨ì‹œì„¤"] and area >= 800)
        or (sub_type == "ì§€ì •ë¬¸í™”ì¬")
        or (sub_type == "í–‰ì •ì•ˆì „ë¶€ë ¹í„°ë„")
        or (sub_type == "ë°©ì‚¬ì„±íê¸°ë¬¼ì €ì¥ì‹œì„¤" and st.sidebar.checkbox("ì†Œí™”ìˆ˜ì²˜ë¦¬ì„¤ë¹„ ì—†ìŒ"))
    ), "í•­ê³µê¸°ê²©ë‚©ê³ , 20ëŒ€ ì´ìƒ ê¸°ê³„ì‹ì£¼ì°¨ì‹œì„¤, ì°¨ê³ Â·ì£¼ì°¨ì¥ 200ã¡ ì´ìƒ, ì „ê¸°Â·í†µì‹  ê´€ë ¨ì‹¤ 300ã¡ ì´ìƒ, ì£¼ì°¨ì‹œì„¤ 800ã¡ ì´ìƒ, ì§€ì •ë¬¸í™”ì¬, ë°©ì‚¬ì„±íê¸°ë¬¼ì €ì¥ì‹œì„¤ ë“± ì¡°ê±´ í•´ë‹¹ ì‹œ ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")

    # âœ… ê°„ì´ìŠ¤í”„ë§í´ëŸ¬ì„¤ë¹„

    # âœ… í”¼ë‚œê¸°êµ¬

    # âœ… íœ´ëŒ€ìš©ë¹„ìƒì¡°ëª…ë“±
    add("í”¼ë‚œêµ¬ì¡°ì„¤ë¹„", "íœ´ëŒ€ìš©ë¹„ìƒì¡°ëª…ë“±", (
        building_type == "ìˆ™ë°•ì‹œì„¤"
        or sub_type == "ë‹¤ì¤‘ì´ìš©ì—…ì†Œ"
        or (occupancy >= 100 and sub_type in ["ì˜í™”ìƒì˜ê´€", "ëŒ€ê·œëª¨ì í¬", "ì§€í•˜ì—­ì‚¬", "ì§€í•˜ìƒê°€"])
    ), "ìˆ™ë°•ì‹œì„¤, ë‹¤ì¤‘ì´ìš©ì—…ì†Œ, ìˆ˜ìš©ì¸ì› 100ëª… ì´ìƒ ì˜í™”ìƒì˜ê´€Â·ëŒ€ê·œëª¨ì í¬Â·ì§€í•˜ì—­ì‚¬Â·ì§€í•˜ìƒê°€ ë“±ì— ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")

    # âœ… ë¹„ìƒì¡°ëª…ë“±
    add("í”¼ë‚œêµ¬ì¡°ì„¤ë¹„", "ë¹„ìƒì¡°ëª…ë“±", (
        ((has_basement or has_windowless_floor) and area >= 450)
        or (sub_type == "í„°ë„" and tunnel_length >= 500)
        or (has_basement and floors >= 5 and area >= 3000)
    ) and building_type not in ["ì°½ê³ ì‹œì„¤", "í•˜ì—­ì¥", "ìœ„í—˜ë¬¼ ì €ì¥ ë° ì²˜ë¦¬ì‹œì„¤"] and sub_type != "ê°€ìŠ¤ì‹œì„¤",
    "ì§€í•˜ì¸µÂ·ë¬´ì°½ì¸µ 450ã¡ ì´ìƒ, í„°ë„ 500m ì´ìƒ, 5ê°œì¸µ ì´ìƒ + 3000ã¡ ì´ìƒì¸ ê²½ìš° ì„¤ì¹˜. ì°½ê³ Â·í•˜ì—­ì¥Â·ê°€ìŠ¤ì‹œì„¤ ì œì™¸.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")

    # âœ… ì¸ëª…êµ¬ì¡°ê¸°êµ¬

    # âœ… í”¼ë‚œìœ ë„ë“± ë° ìœ ë„í‘œì§€
    add("í”¼ë‚œêµ¬ì¡°ì„¤ë¹„", "í”¼ë‚œìœ ë„ë“± ë° ìœ ë„í‘œì§€", (
        building_type not in ["ë™ë¬¼ ë° ì‹ë¬¼ ê´€ë ¨ì‹œì„¤", "ì§€í•˜êµ¬"] and sub_type != "í„°ë„"
    ), "ëª¨ë“  íŠ¹ì •ì†Œë°©ëŒ€ìƒë¬¼ì— ì„¤ì¹˜. ë‹¨, ì§€í•˜ê°€ ì¤‘ í„°ë„ ë° ë™ë¬¼Â·ì‹ë¬¼ ê´€ë ¨ ì¶•ì‚¬, ì§€í•˜êµ¬ëŠ” ì œì™¸.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")

    # âœ… ê°ì„ìœ ë„ë“±
    add("í”¼ë‚œêµ¬ì¡°ì„¤ë¹„", "ê°ì„ìœ ë„ë“±", (
        (sub_type in ["ì¹´ë°”ë ˆ", "ë‚˜ì´íŠ¸í´ëŸ½"])
        or building_type in ["ë¬¸í™” ë° ì§‘íšŒì‹œì„¤", "ì¢…êµì‹œì„¤", "ìš´ë™ì‹œì„¤"]
    ), "ìœ í¥ì£¼ì  ë° ë¬¸í™”Â·ì¢…êµÂ·ìš´ë™ì‹œì„¤ì˜ ê°ì„ì— ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")

    # âœ… í”¼ë‚œìœ ë„ì„ 
    add("í”¼ë‚œêµ¬ì¡°ì„¤ë¹„", "í”¼ë‚œìœ ë„ì„ ", (
        sub_type == "ë‹¤ì¤‘ì´ìš©ì—…ì†Œ" and (st.sidebar.checkbox("í”¼ë‚œí†µë¡œ í­ 120cm ì´ìƒ") or st.sidebar.checkbox("ë³µë„ í­ 150cm ì´ìƒ ë° ì—´ë¦¬ëŠ” ë°©í–¥"))
    ), "ë‹¤ì¤‘ì´ìš©ì—…ì†Œ ë‚´ í”¼ë‚œí†µë¡œ ë˜ëŠ” ë³µë„ê°€ ì¼ì • í­ ì´ìƒì¼ ê²½ìš° ì„¤ì¹˜.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    add("í”¼ë‚œêµ¬ì¡°ì„¤ë¹„", "ì¸ëª…êµ¬ì¡°ê¸°êµ¬", (
        (building_type == "ì˜ë£Œì‹œì„¤" and (floors + (1 if has_basement else 0)) >= 5)
        or (building_type == "ìˆ™ë°•ì‹œì„¤" and sub_type == "ê´€ê´‘í˜¸í…”" and (floors + (1 if has_basement else 0)) >= 7)
        or (
            occupancy >= 100 and sub_type in [
                "ì˜í™”ìƒì˜ê´€", "ëŒ€ê·œëª¨ì í¬", "ì§€í•˜ì—­ì‚¬", "ì§€í•˜ìƒê°€"
            ]
        )
        or (sub_type == "ì´ì‚°í™”íƒ„ì†Œì†Œí™”ì„¤ë¹„" and sub_type != "í˜¸ìŠ¤ë¦´ ì´ì‚°í™”íƒ„ì†Œ ì†Œí™”ì„¤ë¹„")
    ), "ë³‘ì› 5ê°œì¸µ ì´ìƒ, ê´€ê´‘í˜¸í…” 7ê°œì¸µ ì´ìƒ, ìˆ˜ìš©ì¸ì› 100ëª… ì´ìƒ ëŒ€í˜•ì‹œì„¤, ì´ì‚°í™”íƒ„ì†Œì†Œí™”ì„¤ë¹„ ì ìš© ëŒ€ìƒ ë“±ì€ ì¸ëª…êµ¬ì¡°ê¸°êµ¬ í•„ìš”.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    add("í”¼ë‚œêµ¬ì¡°ì„¤ë¹„", "í”¼ë‚œê¸°êµ¬", (
        (floors not in [1, 2] and floors < 11 and not st.sidebar.checkbox("í”¼ë‚œì¸µ ì—¬ë¶€"))
        or (building_type == "ë…¸ìœ ìì‹œì„¤" and floors in [1, 2] and not st.sidebar.checkbox("í”¼ë‚œì¸µ ì—¬ë¶€"))
    ) and building_type not in ["ìœ„í—˜ë¬¼ ì €ì¥ ë° ì²˜ë¦¬ì‹œì„¤", "ë™ë¬¼ ë° ì‹ë¬¼ ê´€ë ¨ì‹œì„¤", "ì§€í•˜êµ¬"] and sub_type != "ê°€ìŠ¤ì‹œì„¤" and sub_type != "í„°ë„",
    "í”¼ë‚œì¸µ, ì§€ìƒ 1ì¸µÂ·2ì¸µ ë° 11ì¸µ ì´ìƒì„ ì œì™¸í•œ ì¸µ, ë…¸ìœ ìì‹œì„¤ì˜ íŠ¹ì • ì¸µ ì™¸ì— ì„¤ì¹˜. ìœ„í—˜ë¬¼(ê°€ìŠ¤), ì§€í•˜êµ¬, í„°ë„ ì œì™¸.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    add("ì†Œí™”ì„¤ë¹„", "ê°„ì´ìŠ¤í”„ë§í´ëŸ¬ì„¤ë¹„", (
        (sub_type in ["ì—°ë¦½ì£¼íƒ", "ë‹¤ì„¸ëŒ€ì£¼íƒ"] and area >= 100)
        or (building_type == "êµìœ¡ì—°êµ¬ì‹œì„¤" and sub_type == "í•©ìˆ™ì†Œ" and area >= 100)
        or (building_type == "ë…¸ìœ ìì‹œì„¤" and area >= 300 and area < 600)
        or (building_type == "ì˜ë£Œì‹œì„¤" and sub_type in ["ì •ì‹ ì˜ë£Œê¸°ê´€", "ì˜ë£Œì¬í™œì‹œì„¤", "ë…¸ìœ ìì‹œì„¤ë¡œ ì‚¬ìš©í•˜ëŠ” ìˆ™ë°•ì‹œì„¤"] and (
            (area >= 300 and area < 600) or (area < 300 and st.sidebar.checkbox("ì°½ì‚´ ì„¤ì¹˜ë¨"))
        ))
        or (sub_type in ["ì¡°ì‚°ì›", "ì‚°í›„ì¡°ë¦¬ì›"] and area < 600)
        or (sub_type in ["ì¢…í•©ë³‘ì›", "ë³‘ì›", "ì¹˜ê³¼ë³‘ì›", "í•œë°©ë³‘ì›", "ìš”ì–‘ë³‘ì›"] and area < 600)
        or (building_type == "ê·¼ë¦°ìƒí™œì‹œì„¤" and area >= 1000)
        or (building_type == "ë³µí•©ê±´ì¶•ë¬¼" and area >= 1000)
        or (sub_type in ["ì˜ì›", "ì¹˜ê³¼ì˜ì›", "í•œì˜ì›"] and st.sidebar.checkbox("ì…ì›ì‹¤ ìˆìŒ"))
        or (sub_type in ["ì¶œì…êµ¬ë³´í˜¸ì‹œì„¤", "ë‹¤ì¤‘ì´ìš©ì—…ì†Œì˜ ì§€í•˜ì¸µ", "ê³ ì‹œì›", "ì‚°í›„ì¡°ë¦¬ì›", "ì‹¤ë‚´ê¶Œì´ì‚¬ê²©ì¥"])
    ), "ì¡°ê²¬í‘œ ê¸°ì¤€ì— ë”°ë¼ ê°„ì´ìŠ¤í”„ë§í´ëŸ¬ì„¤ë¹„ê°€ í•„ìš”í•œ ê²½ìš°ì— í•´ë‹¹.", "ì†Œë°©ì‹œì„¤ë²• ì‹œí–‰ë ¹ ì œ15ì¡°")
    

    return categorized

results = get_fire_facilities(
    building_type, area, floors_above + floors_below,
    has_basement, has_it_room, has_gas, approval_date, sub_type,
    basement_area, layered_use, has_auto_suppression_alt, occupancy,
    has_windowless_floor, has_floor_over_600, tunnel_length, is_designated_tunnel
)

for category, items in results.items():
    st.subheader(f"ğŸ“‚ {category}")
    cols = st.columns(2)
    for i, r in enumerate(items):
        with cols[i % 2]:
            if r['required'] is True:
                symbol = 'âœ…'
                label = 'í•„ìš”'
            elif r['required'] is False:
                symbol = 'âš ï¸'
                label = 'ì„ íƒ'
            else:
                symbol = 'âŒ'
                label = 'í•´ë‹¹ì—†ìŒ'

            st.markdown(f"""
            <div style='background-color:#f9f9f9; padding:12px 16px; border-radius:10px; margin-bottom:16px; box-shadow: 0 0 3px rgba(0,0,0,0.05);'>
              <div style='font-size:20px; font-weight:600;'>{symbol} {r['name']}</div>
              <div style='margin-top:6px; font-size:14px;'>
                <b>ì„¤ì¹˜ ì—¬ë¶€:</b> {label}<br>
                <b>ì„¤ëª…:</b> {r['desc']}<br>
                <b>ê´€ë ¨ ê¸°ì¤€/ë²•ë ¹ ì„¤ëª…:</b> {r['law_text']}
              </div>
            </div>
            """, unsafe_allow_html=True)
